import{r as h,u as p,a as x,j as e}from"./index-BaUkKamr.js";import{a as N}from"./index-Dq7h7Pqt.js";function j(){const[a,o]=h.useState({channelName:"",description:"",channelPic:"",channelBanner:""}),{user:l,setUser:m}=p(),d=x(),[r,s]=h.useState(!1),t=c=>{o({...a,[c.target.name]:c.target.value})},u=async c=>{if(c.preventDefault(),!l){alert("You must be logged in to create a channel.");return}const i={channelName:a.channelName.trim(),description:a.description.trim(),channelPic:a.channelPic.trim(),channelBanner:a.channelBanner.trim()};if(!i.channelName){alert("Channel name is required.");return}s(!0);try{const{data:n}=await N.post("https://youtube-backend-cx37.onrender.com/api/channel",i,{headers:{Authorization:`Bearer ${l.token}`}});m({...l,channelId:n.channelId||n._id}),alert("Channel created!"),d("/channel")}catch(n){alert("Failed to create channel: "+(n.response?.data?.message||n.message))}finally{s(!1)}};return e.jsx("div",{className:"create-channel-modal-bg",children:e.jsxs("div",{className:"create-channel-modal",children:[e.jsx("h2",{className:"create-channel-title",children:"How you'll appear"}),e.jsxs("form",{className:"create-channel-form",onSubmit:u,children:[e.jsxs("div",{className:"create-channel-avatar-section",children:[e.jsx("img",{src:a.channelPic||"https://placehold.co/50.png?text=You",alt:"Channel avatar",className:"create-channel-avatar"}),e.jsx("input",{type:"url",name:"channelPic",placeholder:"Channel picture URL",value:a.channelPic,onChange:t,className:"create-channel-input",style:{marginTop:"0.7rem"}})]}),e.jsxs("div",{className:"create-channel-fields",children:[e.jsx("label",{className:"create-channel-label",children:"Name"}),e.jsx("input",{className:"create-channel-input",name:"channelName",type:"text",placeholder:"Channel name",value:a.channelName,onChange:t,required:!0,autoFocus:!0}),e.jsx("label",{className:"create-channel-label",children:"Description"}),e.jsx("textarea",{className:"create-channel-input",name:"description",placeholder:"Channel description",value:a.description,onChange:t,rows:2}),e.jsx("label",{className:"create-channel-label",children:"Banner URL (optional)"}),e.jsx("input",{className:"create-channel-input",name:"channelBanner",type:"url",placeholder:"Channel banner URL",value:a.channelBanner,onChange:t})]}),e.jsxs("div",{className:"create-channel-actions",children:[e.jsx("button",{type:"button",className:"create-channel-cancel",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx("button",{type:"submit",className:"create-channel-submit",disabled:!a.channelName||r,children:r?"Creating...":"Create channel"})]}),e.jsxs("div",{className:"create-channel-terms",children:["By clicking Create Channel you agree to ",e.jsx("a",{href:"https://www.youtube.com/t/terms",target:"_blank",rel:"noopener noreferrer",children:"YouTube's Terms of Service"}),"."]})]})]})})}export{j as default};
